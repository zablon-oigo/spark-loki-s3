auth_enabled: true

server:
  http_listen_port: 3100
  grpc_listen_port: 0


common:
  path_prefix: ./loki/raw          
  storage:
    s3:
      endpoint: s3.amazonaws.com
      region: us-east-1
      bucketnames: 
      access_key_id: ${AWS_ACCESS_KEY}
      secret_access_key: ${AWS_SECRET_ACCESS_KEY}
      s3forcepathstyle: true
  replication_factor: 1


schema_config:
  configs:
    - from: "2026-01-01"
      store: tsdb
      object_store: s3
      schema: v13
      index:
        prefix: index_
        period: 24h

storage_config:
  tsdb_shipper:
    active_index_directory: ./loki/index
    cache_location: .loki/index_cache


compactor:
  working_directory: ./loki/compactor
  retention_enabled: false   


ingester:
  chunk_target_size: 262144       
  max_chunk_age: 30m              
  chunk_idle_period: 5m            
  chunk_retain_period: 1m
  wal:
    enabled: true
    dir: ./loki/wal
  lifecycler:
    ring:
      kvstore:
        store: inmemory
      replication_factor: 1


limits_config:
  retention_period: 168h          
  max_cache_freshness_per_query: 10m
